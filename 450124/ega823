CREATE TABLE EGA.TBCONSELHOMUNICIPALEDU (
  CMECODIGO smallint  not null ,
  CMENOME varchar(100)  not null ,
  CMESIGLA varchar(6)  not null ,
  TXJCODIGO integer  not null ,
  CMEDURACAOMANDATO smallint ,
  CMELOCALTRABALHO varchar(200)  not null ,
  CMEPERIODICIDADE smallint  not null ,
  CMEQTDTITULAR smallint  not null ,
  CMEQTDSUPLENTE smallint ,
  CONSTRAINT CHECK_CMEDURACAOMANDATO CHECK (CMEDURACAOMANDATO IN (4,3,2,1)),
  CONSTRAINT CHECK_CMEPERIODICIDADE CHECK (CMEPERIODICIDADE IN (7,6,5,4,3,2,1)),
  CONSTRAINT check_qtd_titular CHECK (CMEQTDTITULAR BETWEEN 1 AND 50),
  CONSTRAINT check_qtd_suplente CHECK (CMEQTDSUPLENTE BETWEEN 1 AND 50)
);
COMMENT ON TABLE EGA.TBCONSELHOMUNICIPALEDU IS 'Conselho Municipal de Educação';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMECODIGO IS 'Código';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMENOME IS 'Nome';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMESIGLA IS 'Sigla';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.TXJCODIGO IS 'Código do Texto Jurídico';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMEDURACAOMANDATO IS 'Duração do Mandato';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMELOCALTRABALHO IS 'Local de Trabalho/Sede das Reuniões';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMEPERIODICIDADE IS 'Periodicidade de Reuniões';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMEQTDTITULAR IS 'Qtde Titulares';
COMMENT ON COLUMN EGA.TBCONSELHOMUNICIPALEDU.CMEQTDSUPLENTE IS 'Qtde Suplentes';

ALTER TABLE EGA.TBCONSELHOMUNICIPALEDU ADD CONSTRAINT  PK_TBCONSELHOMUNICIPALEDU PRIMARY KEY (CMECODIGO) USING INDEX TABLESPACE INDICE;

CREATE UNIQUE INDEX idx_unique_cmenome ON EGA.TBCONSELHOMUNICIPALEDU(MD5(LOWER(REPLACE(webbased.TO_ASCII_IPM(CMENOME),' ','')))) TABLESPACE INDICE;

ALTER TABLE EGA.TBCONSELHOMUNICIPALEDU ADD CONSTRAINT "FK TBCONSELHOMUNICIPALEDU -> TBTEXTOJURIDICO" FOREIGN KEY (TXJCODIGO) REFERENCES wlg.TBTEXTOJURIDICO (TXJCODIGO);
