CREATE TABLE EGA.TBCMEMANDATOMEMBRO (
  CMMCODIGO smallint  not null ,
  UNICODIGO bigint  not null ,
  UNICODIGOENTIDADE bigint ,
  CLICODIGO integer ,
  CMBCLASSIFICACAO smallint  not null ,
  CMBATIVO smallint DEFAULT 1 not null ,
  CONSTRAINT CHECK_CMBCLASSIFICACAO CHECK (CMBCLASSIFICACAO IN (2,1)),
  CONSTRAINT DOM15_CMBATIVO CHECK (CMBATIVO IN (0,1))
);
COMMENT ON TABLE EGA.TBCMEMANDATOMEMBRO IS 'Membro do Mandato do Conselho Municipal de Educação';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.CMMCODIGO IS 'Código';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.UNICODIGO IS 'Código da Pessoa';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.UNICODIGOENTIDADE IS 'Código da Pessoa Entidade Parceira';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.CLICODIGO IS 'Código do Cliente';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.CMBCLASSIFICACAO IS 'Classificação';
COMMENT ON COLUMN EGA.TBCMEMANDATOMEMBRO.CMBATIVO IS 'Ativo?';

ALTER TABLE EGA.TBCMEMANDATOMEMBRO ADD CONSTRAINT  PK_TBCMEMANDATOMEMBRO PRIMARY KEY (CMMCODIGO,UNICODIGO) USING INDEX TABLESPACE INDICE;

ALTER TABLE EGA.TBCMEMANDATOMEMBRO ADD CONSTRAINT "FK TBCMEMANDATOMEMBRO -> TBUNICO" FOREIGN KEY (UNICODIGO) REFERENCES WUN.TBUNICO (UNICODIGO) ;
ALTER TABLE EGA.TBCMEMANDATOMEMBRO ADD CONSTRAINT "FK TBCMEMANDATOMEMBRO -> TBENTIDADEPARCEIRA" FOREIGN KEY (UNICODIGOENTIDADE,CLICODIGO) REFERENCES EGA.TBENTIDADEPARCEIRA (UNICODIGOENTIDADE,CLICODIGO) 
 MATCH FULL;
ALTER TABLE EGA.TBCMEMANDATOMEMBRO ADD CONSTRAINT "FK TBCMEMANDATOMEMBRO -> TBCMEMANDATO" FOREIGN KEY (CMMCODIGO) REFERENCES EGA.TBCMEMANDATO (CMMCODIGO) ;
